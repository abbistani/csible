---

- name: set body content from file
  set_fact:
    payload: "{{ lookup('file', file) }}"

- name: PUT request
  uri:
    url: "{{ url }}"
    method: PUT
    user: "{{ user }}"
    password: "{{ password }}"
    body: "{{ payload }}"
    force_basic_auth: yes
    return_content: yes
    HEADER_Content-Type: "application/xml"
  register: response

- name: save response
  copy:
    content: "{{ response.content }}"
    dest: "{{ playbook_dir }}/{{ savefile | default('response.xml') }}"
